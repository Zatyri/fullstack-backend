(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(4),r=t(2),u=t(0),c=t.n(u),o=t(14),l=t.n(o),i=function(e){var n=e.header;return c.a.createElement("h2",null,n)},m=function(e){var n=e.persons,t=e.search,a=e.deletePerson,r=n.filter((function(e){var n=e.name.toLowerCase(),a=t.toLowerCase();return n.includes(a)}));return c.a.createElement(c.a.Fragment,null,r.map((function(e){return c.a.createElement("p",{key:e.id},e.name,": ",e.number," ",c.a.createElement("button",{value:e.name,onClick:a},"delete"))})))},d=function(e){var n=e.search,t=e.handleChange;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"filter shown with"),c.a.createElement("input",{value:n,onChange:t}))},f=function(e){var n=e.addName,t=e.newName,a=e.handleAddName,r=e.newNumber,u=e.handleAddNumber;return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:n},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:t,onChange:a})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:r,onChange:u})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},s=t(3),h=t.n(s),b="/api/persons",p=function(){return h.a.get(b).then((function(e){return e.data}))},E=function(e){return h.a.post(b,e).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){var n=e.message,t=e.error;return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{style:t?{color:"red",background:"yellow",fontSize:25}:{color:"green",background:"lightgreen",fontSize:25}},n))},j=function(){var e=Object(u.useState)([{name:"",number:"",id:""}]),n=Object(r.a)(e,2),t=n[0],o=n[1],l=Object(u.useState)(""),s=Object(r.a)(l,2),h=s[0],b=s[1],j=Object(u.useState)(""),O=Object(r.a)(j,2),k=O[0],N=O[1],y=Object(u.useState)(""),S=Object(r.a)(y,2),C=S[0],F=S[1],T=Object(u.useState)(null),A=Object(r.a)(T,2),x=A[0],I=A[1],P=Object(u.useState)(!1),z=Object(r.a)(P,2),D=z[0],J=z[1],L=function(){p().then((function(e){o(e)}))};Object(u.useEffect)(L,[]);var B=function(){if(!window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?")))return null;var e=t.findIndex((function(e){return e.name===h})),n=t[e].id,r=t[e],u=Object(a.a)(Object(a.a)({},r),{},{number:k});g(n,u).then((function(e){o(t.map((function(t){return t.id!==n?t:e}))),I("".concat(h," number was successfully updated to ").concat(k)),setTimeout((function(){I(null)}),5e3)})).catch((function(e){J(!0),I("Failed to update number"),setTimeout((function(){I(null),J(!1)}),5e3)})),b(""),N("")};return c.a.createElement("div",null,c.a.createElement(i,{header:"Phonebook"}),c.a.createElement(w,{message:x,error:D}),c.a.createElement(d,{search:C,handleChange:function(e){F(e.target.value)}}),c.a.createElement(i,{header:"add a new"}),c.a.createElement(f,{addName:function(e){if(e.preventDefault(),t.find((function(e){return e.name===h})))return B(),null;var n={name:h,number:k};b(""),N(""),E(n).then((function(e){o(t.concat(e)),I("".concat(e.name," was successfully added to the phonebook")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){J(!0),I("Failed to add name to the phonebook"),setTimeout((function(){I(null),J(!1)}),5e3)}))},newName:h,handleAddName:function(e){return b(e.target.value)},newNumber:k,handleAddNumber:function(e){return N(e.target.value)}}),c.a.createElement(i,{header:"Numbers"}),c.a.createElement(m,{persons:t,search:C,deletePerson:function(e){if(!window.confirm("Delete ".concat(e.target.value,"?")))return null;var n=t.findIndex((function(n){return n.name===e.target.value})),a=t[n].id,r=t[n].name;v(a).then((function(){L(),I("".concat(r," was successfully deleted from the phonebook")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){J(!0),I("Failed to delete contact"),setTimeout((function(){I(null),J(!1)}),5e3)}))}}))};l.a.render(c.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.af20dbb5.chunk.js.map